{% load custom_tags %}
<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>HOME</title>
     
     <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <!--<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>-->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.min.js"></script>

</head>

<body>
    <nav class="navbar navbar-expand-md bg-light navbar-light border-bottom">
      <a class="navbar-brand">ğŸ“ ì¥í•™ê¸ˆ: <strong>{{ scholarship_name }}</strong>&nbsp;{{ user }}&nbsp;ë‹˜ì´ ì…ë ¥í•œ ì ìˆ˜í‘œ</a>
    </nav>
      <br>
      <div class="container my-3">
      <p style="color:green;">ì…ë ¥ ìƒíƒœ:Total Entered/Total Requird<strong> {{ total_entered }} / {{ total_required }}</strong></p>
      
        
        {% if grouped_scores %}
        <table class="table table-bordered">
          <tr>
            <th>í›„ë³´ì</th>
            <th>ê¸°ì¤€</th>
            <th>ì ìˆ˜</th>
            <th>ìˆ˜ì •</th>
          </tr>
        
          {% for candidate, scores in grouped_scores.items %}
            {% for score in scores %}
              <tr>
                {% if forloop.first %}
                  <td rowspan="{{ scores|length|add:1 }}">{{ candidate.name }}</td>
                {% endif %}
                <td>{{ score.criteria.name }}</td>
                <td>{{ score.score }}</td>
                <td><a href="{% url 'edit_score' score.id %}" class="btn btn-secondary">ìˆ˜ì •</a></td>
              </tr>
            {% endfor %}
            <tr>
              <td><strong>ì´ì </strong></td>
              <td colspan="2">
                <strong>{{ candidate_totals|get_item:candidate.id }}</strong>
                
                {% with total=candidate_totals|get_item:candidate.id %}
                  {% if total < 20 %}
                    <span style="color: red;">âš  ì´ì ì´ ë„ˆë¬´ ë‚®ìŠµë‹ˆë‹¤.</span>
                  {% elif total > 100 %}
                    <span style="color: red;">âš  ì´ì ì´ ë„ˆë¬´ ë†’ìŠµë‹ˆë‹¤.</span>
                  {% else %}
                    <span style="color: green;">âš  ì´ì ì´ 100ì  ì•„ë˜ 20ì  ì´ìƒìœ¼ë¡œ ìœ íš¨í•©ë‹ˆë‹¤. ì„ ì •ê¸°ì¤€ë³„ë¡œ ì´ˆê³¼í•˜ê±°ë‚˜ ë¯¸ë‹¬ëœ ì ìˆ˜ê°€ ì…ë ¥ë˜ì§€ ì•Šì•˜ëŠ”ì§€ í™•ì¸ë°”ëë‹ˆë‹¤. </span>
                  {% endif %}
                {% endwith %}
              </td>
            </tr>
          {% endfor %}
        </table>
        {% else %}
          <p>ì…ë ¥ëœ ì ìˆ˜ê°€ ì—†ìŠµë‹ˆë‹¤.</p>
        {% endif %}

        {% if total_required == total_entered %}
        <p style="color:green;"><strong>âœ… ëª¨ë“  ì ìˆ˜ë¥¼ ì…ë ¥ ì™„ë£Œí•˜ì…¨ìŠµë‹ˆë‹¤! [ì™„ë£Œ] ë²„íŠ¼ì„ ëˆŒëŸ¬ ì£¼ì„¸ìš” </strong></p>

      {% endif %}

        <a href="{% url 'index' %}" class="btn btn-secondary">í™ˆìœ¼ë¡œ</a>
        <a href="{% url 'mark_review_complete' %}" class="btn btn-secondary">ì™„ë£Œ</a>
</body>
</html>